<!doctype html><html lang=es><head><title>RDS Snapshot → S3: Diagnosticar y resolver un Export deshabilitado</title><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.405d7f92a8dc58b16aec857858b3f63df64fa4178ad22c80fa08fda2ac4db0f7.css integrity="sha256-QF1/kqjcWLFq7IV4WLP2PfZPpBeK0iyA+gj9oqxNsPc="><meta property="og:title" content="Nicolas Serbin Blog"><meta property="og:type" content="website"><meta property="og:description" content="Portfolio y blog personal de Nicolas Serbin."><meta property="og:image" content="/images/author/perfil.png"><meta property="og:url" content="https://nserbin.github.io/"><meta name=description content="Desbloqueá un Export to S3 deshabilitado para RDS Snapshot con un flujo claro y sin consola. Diagnóstico rápido 🕵️, restore temporal en gp3 🧱, nuevo Snapshot 📸 y export con el wiring correcto de IAM/KMS 🔐."><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/es>Nicolas Serbin's</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/es#home>Inicio</a></li><li class=nav-item><a class=nav-link href=/es#about>Sobre Mi</a></li><li class=nav-item><a class=nav-link href=/es#skills>Habilidades</a></li><li class=nav-item><a class=nav-link href=/es#experiences>Experiencia</a></li><li class=nav-item><a class=nav-link href=/es#education>Educacion</a></li><li class=nav-item><a class=nav-link href=/es#languages>Idiomas</a></li><li class=nav-item><a class=nav-link href=/es#projects>Proyectos</a></li><li class=nav-item><a class=nav-link href=/es#recent-posts>Posts recientes</a></li><li class=nav-item><a class=nav-link href=/es#accomplishments>Cursos</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/es/posts>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=languageSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><span class="fi fi-ar"></span>
Spanish</a><div class=dropdown-menu aria-labelledby=languageSelector><a class="dropdown-item nav-link languages-item" href=/posts/aws/aws-rds/export-to-s3><span class="fi fi-gb"></span>
English
</a><a class="dropdown-item nav-link languages-item" href=/es/posts/aws/aws-rds/export-to-s3><span class="fi fi-ar"></span>
Spanish</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/es/search><input type=text name=keyword placeholder=Búsqueda data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/es/posts/ data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=minus-circle></i><a class="active list-link" href=/es/posts/aws/> AWS</a><ul class=active><li><i data-feather=plus-circle></i><a class=list-link href=/es/posts/aws/aws-networking/> Networking</a><ul><li><a class=list-link href=/es/posts/aws/aws-networking/from-nginx-to-alb/ title="Migrando de NGINX a ALB">Migrando de NGINX a ALB</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/es/posts/aws/aws-rds/> RDS</a><ul class=active><li><a class="active list-link" href=/es/posts/aws/aws-rds/export-to-s3/ title="RDS Snapshot → S3 (Fix Disabled Export)">RDS Snapshot → S3 (Fix Disabled Export)</a></li></ul></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/posts/rds-to-s3.webp)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/perfil_hu_2cfaf1d644cfea1f.png alt="Author Image"><h5 class=author-name>Nicolás Serbin</h5><p class=text-muted>miércoles, 27 de agosto de 2025</p></div><div class=title><h1>RDS Snapshot → S3: Diagnosticar y resolver un Export deshabilitado</h1></div><div class=tags><ul style=padding-left:0><li class=rounded><a href=/es/tags/s3/ class="btn btn-sm btn-info">S3</a></li><li class=rounded><a href=/es/tags/rds/ class="btn btn-sm btn-info">RDS</a></li><li class=rounded><a href=/es/tags/storage-type/ class="btn btn-sm btn-info">Storage Type</a></li><li class=rounded><a href=/es/tags/export-to-s3/ class="btn btn-sm btn-info">Export to S3</a></li><li class=rounded><a href=/es/tags/snapshot/ class="btn btn-sm btn-info">Snapshot</a></li></ul></div><div class=post-content id=post-content><p>Antes de entrar en el por qué y el cómo, esto es lo que entregamos:</p><ul><li><p>⏱️ Diagnóstico claro en menos de un minuto (sin adivinar en la consola)</p></li><li><p>🫥 Camino no intrusivo: solo instancia <strong>temporal</strong> (no tocamos tu RDS actual)</p></li><li><p>🔐 Export que funciona, con la forma correcta de <strong>IAM/KMS</strong></p></li><li><p>🧩 Comandos copy-paste para tu runbook o CI</p></li></ul><div style=margin-top:2rem></div><div class="alert success"><span><i data-feather=check-circle></i></span>
<span><strong>Todo esto sin modificar tu instancia actual: restaurás el Snapshot en una instancia <strong>gp3</strong> temporal 🚀, creás un Snapshot nuevo 📸 y exportás ese 📦.</strong></span></div><div style=margin-top:4rem></div><h2 id=por-qué-el-export-está-deshabilitado->Por qué el Export está deshabilitado 🔒</h2><p><div style=margin-top:1rem></div>El bloqueo más frecuente es simple: el Snapshot fue tomado desde una instancia con almacenamiento <strong>magnético (<code>standard</code>)</strong> 🧲. Los Snapshots con ese linaje <strong>no</strong> son elegibles para Export. La consola es ambigua; el <strong>CLI</strong> te muestra exactamente qué pasa 🧪.</p><div style=margin-top:4rem></div><h2 id=console-vs-cli-lo-que-realmente-ayuda->Console vs CLI: lo que realmente ayuda ⚖️</h2><div style=margin-top:2rem></div><div style=display:flex;justify-content:center><table><thead><tr><th></th><th>❌ Solo consola</th><th>✅ Runbook con CLI</th></tr></thead><tbody><tr><td><strong>Feedback</strong></td><td>Botón gris, sin motivo claro 😶‍🌫️</td><td>Estado y campos explícitos (StorageType, errores) 🧾</td></tr><tr><td><strong>Acciones</strong></td><td>Prueba y error 🎯</td><td>Flujo determinístico (restore → Snapshot → export) ▶️</td></tr><tr><td><strong>Repeatability</strong></td><td>Pasos manuales 🧱</td><td>Scriptable & auditable 🤖</td></tr></tbody></table></div><div style=margin-top:4rem></div><h2 id=diagnóstico-rápido-cli->Diagnóstico rápido (CLI) 🕵️‍♂️</h2><p><div style=margin-top:2rem></div><strong>Revisar el tipo de almacenamiento del Snapshot</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws rds describe-db-snapshots   --db-snapshot-identifier &lt;SNAPSHOT_ID&gt;   --query <span style=color:#e6db74>&#39;DBSnapshots[0].[DBSnapshotIdentifier,Engine,EngineVersion,StorageType,Encrypted,Status]&#39;</span>   --output table
</span></span></code></pre></div><p><div style=margin-top:2rem></div><div class="alert warning"><span><i data-feather=alert-triangle></i></span>
<span><strong>Si <code>StorageType</code> = <code>standard</code>, ese Snapshot no se va a exportar.</strong></span></div></p><div style=margin-top:4rem></div><h2 id=arquitectura-a-simple-vista->Arquitectura a simple vista 🧭</h2><p>El flujo es directo: <strong>restore</strong> del Snapshot → <strong>instancia gp3 temporal</strong> → <strong>nuevo Snapshot</strong> → <strong>Export a S3</strong> con un <strong>IAM Role</strong> asumido por <code>export.rds.amazonaws.com</code>.</p><div style=margin-top:2rem></div><img src=/images/posts/diagram-rds-export-s3.png alt="Flujo end-to-end para destrabar el Export de RDS Snapshot a S3" class=center><div style=margin-top:2rem></div><p>Esto muestra:</p><ul><li><p>🔁 Dónde cambia el linaje de almacenamiento (magnético → gp3)</p></li><li><p>🔗 Cómo el servicio de export asume un IAM Role para escribir en un S3 Bucket</p></li><li><p>🧰 Las piezas mínimas (RDS, S3, IAM, KMS opcional)</p></li></ul><div style=margin-top:4rem></div><h2 id=playbook-sin-cambios-sobre-tu-rds-existente->Playbook (sin cambios sobre tu RDS existente) 📘</h2><p><div style=margin-top:2rem></div><div class="alert info"><span><i data-feather=info></i></span>
<span><strong><strong>No</strong> modificamos tu DB actual. Restauramos el Snapshot en una instancia <strong>SSD</strong> temporal, creamos un <strong>Snapshot</strong> nuevo y exportamos ese.</strong></span></div></p><div style=margin-top:2rem></div><h3 id=-restore-del-snapshot-en-gp3-instancia-temporal>🧱 Restore del Snapshot en <strong>gp3</strong> (instancia temporal)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Vars</span>
</span></span><span style=display:flex><span>export REGION<span style=color:#f92672>=</span>&lt;REGION&gt;
</span></span><span style=display:flex><span>export TEMP_DB_ID<span style=color:#f92672>=</span>&lt;TEMP_DB_ID&gt;
</span></span><span style=display:flex><span>export SNAPSHOT_ID<span style=color:#f92672>=</span>&lt;SNAPSHOT_ID&gt;
</span></span><span style=display:flex><span>export SUBNET_GROUP<span style=color:#f92672>=</span>&lt;DB_SUBNET_GROUP&gt;
</span></span><span style=display:flex><span>export SG_ID<span style=color:#f92672>=</span>&lt;SECURITY_GROUP_ID&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>aws rds restore-db-instance-from-db-snapshot   --region $REGION   --db-instance-identifier $TEMP_DB_ID   --db-snapshot-identifier $SNAPSHOT_ID   --storage-type gp3   --no-publicly-accessible   --db-subnet-group-name $SUBNET_GROUP   --vpc-security-group-ids $SG_ID
</span></span></code></pre></div><div style=margin-top:2rem></div><h3 id=-crear-un-nuevo-snapshot-ahora-ssd>📸 Crear un <strong>nuevo Snapshot</strong> (ahora SSD)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export NEW_SNAPSHOT_ID<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>TEMP_DB_ID<span style=color:#e6db74>}</span>-exportable-<span style=color:#66d9ef>$(</span>date +%Y%m%d<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>aws rds create-db-snapshot   --db-snapshot-identifier $NEW_SNAPSHOT_ID   --db-instance-identifier $TEMP_DB_ID
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Sanity check</span>
</span></span><span style=display:flex><span>aws rds describe-db-snapshots   --db-snapshot-identifier $NEW_SNAPSHOT_ID   --query <span style=color:#e6db74>&#39;DBSnapshots[0].[DBSnapshotIdentifier,StorageType,Status]&#39;</span>   --output table
</span></span></code></pre></div><div style=margin-top:4rem></div><h2 id=-export-a-s3-el-wiring-que-importa>🧷 Export a S3 (el wiring que importa)</h2><div style=margin-top:2rem></div><h3 id=-requerimientos>✅ Requerimientos</h3><ul><li><p>🌍 S3 Bucket en la <strong>misma región</strong> que el Snapshot</p></li><li><p>🤝 <strong>IAM Role</strong> para Export con trust en <code>export.rds.amazonaws.com</code></p></li><li><p>📝 El Role puede <strong>escribir</strong> en el S3 Bucket (PutObject, ListBucket, GetBucketLocation, etc.)</p></li><li><p>🔑 Si usás KMS, la KMS Key está <strong>Enabled</strong> y permite al servicio de export</p></li><li><p>🛑 Sin <strong>SCP</strong> de la Organization bloqueando <code>rds:StartExportTask</code></p></li></ul><h4 id=-trust-policy-asumida-por-el-servicio-de-export>👇 Trust Policy (asumida por el servicio de export)</h4><div style=margin-top:1rem></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Version&#34;</span>: <span style=color:#e6db74>&#34;2012-10-17&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Statement&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Effect&#34;</span>: <span style=color:#e6db74>&#34;Allow&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Principal&#34;</span>: { 
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;Service&#34;</span>: <span style=color:#e6db74>&#34;export.rds.amazonaws.com&#34;</span> 
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Action&#34;</span>: <span style=color:#e6db74>&#34;sts:AssumeRole&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div style=margin-top:3rem></div><h4 id=-minimal-permissions-policy-s3--kms>📜 Minimal Permissions Policy (S3 + KMS)</h4><div style=margin-top:1rem></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Version&#34;</span>: <span style=color:#e6db74>&#34;2012-10-17&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Statement&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Effect&#34;</span>: <span style=color:#e6db74>&#34;Allow&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Action&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:PutObject*&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:AbortMultipartUpload&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:ListBucket&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:GetBucketLocation&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:DeleteObject*&#34;</span>
</span></span><span style=display:flex><span>      ],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Resource&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:s3:::&lt;BUCKET&gt;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:s3:::&lt;BUCKET&gt;/*&#34;</span>
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Effect&#34;</span>: <span style=color:#e6db74>&#34;Allow&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Action&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;kms:CreateGrant&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;kms:DescribeKey&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;kms:Encrypt&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;kms:GenerateDataKey*&#34;</span>
</span></span><span style=display:flex><span>      ],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Resource&#34;</span>: <span style=color:#e6db74>&#34;&lt;KMS_KEY_ARN&gt;&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div style=margin-top:3rem></div><h4 id=-bucket-policy-allow-explícito-para-el-role>🧾 Bucket Policy (allow explícito para el Role)</h4><div style=margin-top:1rem></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Version&#34;</span>: <span style=color:#e6db74>&#34;2012-10-17&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Statement&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Sid&#34;</span>: <span style=color:#e6db74>&#34;AllowRDSExportWrite&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Effect&#34;</span>: <span style=color:#e6db74>&#34;Allow&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Principal&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;AWS&#34;</span>: <span style=color:#e6db74>&#34;arn:aws:iam::&lt;ACCOUNT_ID&gt;:role/&lt;RDS_EXPORT_ROLE&gt;&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Action&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:PutObject&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:AbortMultipartUpload&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:ListBucket&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:GetBucketLocation&#34;</span>
</span></span><span style=display:flex><span>      ],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Resource&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:s3:::&lt;BUCKET&gt;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:s3:::&lt;BUCKET&gt;/*&#34;</span>
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div style=margin-top:4rem></div><h3 id=-iniciar-el-export>▶️ Iniciar el Export</h3><div style=margin-top:1rem></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws rds start-export-task <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --export-task-identifier export-$NEW_SNAPSHOT_ID <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --source-arn arn:aws:rds:$REGION:&lt;ACCOUNT_ID&gt;:snapshot:$NEW_SNAPSHOT_ID <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --s3-bucket-name &lt;BUCKET&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --s3-prefix rds-exports/$NEW_SNAPSHOT_ID/ <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --iam-role-arn arn:aws:iam::&lt;ACCOUNT_ID&gt;:role/&lt;RDS_EXPORT_ROLE&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --kms-key-id &lt;KMS_KEY_ARN&gt;
</span></span></code></pre></div><div style=margin-top:4rem></div><h3 id=-observar-la-ejecución>👀 Observar la ejecución</h3><div style=margin-top:1rem></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws rds describe-export-tasks <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --filters Name<span style=color:#f92672>=</span>export-task-identifier,Values<span style=color:#f92672>=</span>export-$NEW_SNAPSHOT_ID <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --query <span style=color:#e6db74>&#39;ExportTasks[0].[Status,ProgressPercentage,S3Bucket,S3Prefix,FailureCause]&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --output table
</span></span></code></pre></div><div style=margin-top:4rem></div><h2 id=troubleshooting-triage-rápido->Troubleshooting (triage rápido) 🧯</h2><ul><li><p>🔎 <strong>AccessDenied</strong> → revisá <strong>SCP</strong> de la Organization, permisos del caller y la Policy del IAM Role</p></li><li><p>🧱 <strong>KMSKeyNotAccessible</strong> → KMS Key deshabilitada o algún Deny afectando <code>export.rds.amazonaws.com</code></p></li><li><p>🗺️ <strong>BucketRegionError</strong> → Snapshot y S3 Bucket deben estar en la <strong>misma región</strong></p></li><li><p>🤝 <strong>Shared snapshot</strong> → alinear accesos/grants de KMS para cross-account</p></li></ul><div style=margin-top:4rem></div><h2 id=-lecciones-aprendidas>💡 Lecciones aprendidas</h2><ul><li>No dependas de la consola para explicar el “por qué” — el <strong>CLI</strong> es tu fuente de verdad</li><li>Prevenilo de entrada: estandarizá <strong>gp3</strong> en tus módulos y bloqueá <code>standard</code> en CI</li><li>Mantené un <strong>export Role</strong> preaprobado por cuenta/región para evitar IAM ad-hoc</li></ul><div style=margin-top:4rem></div><h2 id=-necesitás-ayuda-con-esto>🙋‍♂️ ¿Necesitás ayuda con esto?</h2><p>¿Necesitás ayuda manteniendo tu RDS — Backups restaurables, governance de Snapshots, exports predecibles, etc. ?</p><p>Implementamos estos patrones en múltiples cuentas y regiones de AWS — repetibles, auditables y de bajo mantenimiento.</p><p>💬 <a href=https://linkedin.com/in/NSerbin target=_blank rel=noopener>Hablemos en LinkedIn</a> — encantado de ayudar o intercambiar ideas.<div style=margin-top:4rem></div></p></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Compartir en:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fnserbin.github.io%2fes%2fposts%2faws%2faws-rds%2fexport-to-s3%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=https%3a%2f%2fnserbin.github.io%2fes%2fposts%2faws%2faws-rds%2fexport-to-s3%2f&text=RDS%20Snapshot%20%e2%86%92%20S3%3a%20Diagnosticar%20y%20resolver%20un%20Export%20deshabilitado&via=Nicolas%20Serbin%27s" target=_blank><i class="fab fa-twitter"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnserbin.github.io%2fes%2fposts%2faws%2faws-rds%2fexport-to-s3%2f&title=RDS%20Snapshot%20%e2%86%92%20S3%3a%20Diagnosticar%20y%20resolver%20un%20Export%20deshabilitado" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fnserbin.github.io%2fes%2fposts%2faws%2faws-rds%2fexport-to-s3%2f&title=RDS%20Snapshot%20%e2%86%92%20S3%3a%20Diagnosticar%20y%20resolver%20un%20Export%20deshabilitado" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=RDS%20Snapshot%20%e2%86%92%20S3%3a%20Diagnosticar%20y%20resolver%20un%20Export%20deshabilitado https%3a%2f%2fnserbin.github.io%2fes%2fposts%2faws%2faws-rds%2fexport-to-s3%2f" target=_blank><i class="fab fa-whatsapp"></i>
</a><a class="btn icon-button" href="mailto:?subject=RDS%20Snapshot%20%e2%86%92%20S3%3a%20Diagnosticar%20y%20resolver%20un%20Export%20deshabilitado&body=https%3a%2f%2fnserbin.github.io%2fes%2fposts%2faws%2faws-rds%2fexport-to-s3%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/NSerbin/nserbin.github.io/edit/source/content/posts/aws/aws-rds/export-to-s3.es.md title="Mejorar esta página" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Mejorar esta página</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/es/posts/aws/aws-networking/from-nginx-to-alb/ title="NGINX Out, ALB In - Redirects 70% más baratos y SIN servidores !" class="btn filled-button"><div><i class="fas fa-chevron-circle-left"></i> Anterior</div><div class=next-prev-text>NGINX Out, ALB In - Redirects 70% más baratos y SIN servidores !</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Contenido</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#por-qué-el-export-está-deshabilitado->Por qué el Export está deshabilitado 🔒</a></li><li><a href=#console-vs-cli-lo-que-realmente-ayuda->Console vs CLI: lo que realmente ayuda ⚖️</a></li><li><a href=#diagnóstico-rápido-cli->Diagnóstico rápido (CLI) 🕵️‍♂️</a></li><li><a href=#arquitectura-a-simple-vista->Arquitectura a simple vista 🧭</a></li><li><a href=#playbook-sin-cambios-sobre-tu-rds-existente->Playbook (sin cambios sobre tu RDS existente) 📘</a><ul><li><a href=#-restore-del-snapshot-en-gp3-instancia-temporal>🧱 Restore del Snapshot en <strong>gp3</strong> (instancia temporal)</a></li><li><a href=#-crear-un-nuevo-snapshot-ahora-ssd>📸 Crear un <strong>nuevo Snapshot</strong> (ahora SSD)</a></li></ul></li><li><a href=#-export-a-s3-el-wiring-que-importa>🧷 Export a S3 (el wiring que importa)</a><ul><li><a href=#-requerimientos>✅ Requerimientos</a><ul><li><a href=#-trust-policy-asumida-por-el-servicio-de-export>👇 Trust Policy (asumida por el servicio de export)</a></li><li><a href=#-minimal-permissions-policy-s3--kms>📜 Minimal Permissions Policy (S3 + KMS)</a></li><li><a href=#-bucket-policy-allow-explícito-para-el-role>🧾 Bucket Policy (allow explícito para el Role)</a></li></ul></li><li><a href=#-iniciar-el-export>▶️ Iniciar el Export</a></li><li><a href=#-observar-la-ejecución>👀 Observar la ejecución</a></li></ul></li><li><a href=#troubleshooting-triage-rápido->Troubleshooting (triage rápido) 🧯</a></li><li><a href=#-lecciones-aprendidas>💡 Lecciones aprendidas</a></li><li><a href=#-necesitás-ayuda-con-esto>🙋‍♂️ ¿Necesitás ayuda con esto?</a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navegación</h5><ul><li class=nav-item><a class=smooth-scroll href=https://nserbin.github.io/es/#about>Sobre Mi</a></li><li class=nav-item><a class=smooth-scroll href=https://nserbin.github.io/es/#skills>Habilidades</a></li><li class=nav-item><a class=smooth-scroll href=https://nserbin.github.io/es/#experiences>Experiencia</a></li><li class=nav-item><a class=smooth-scroll href=https://nserbin.github.io/es/#education>Educacion</a></li><li class=nav-item><a class=smooth-scroll href=https://nserbin.github.io/es/#languages>Idiomas</a></li><li class=nav-item><a class=smooth-scroll href=https://nserbin.github.io/es/#projects>Proyectos</a></li><li class=nav-item><a class=smooth-scroll href=https://nserbin.github.io/es/#recent-posts>Posts recientes</a></li><li class=nav-item><a class=smooth-scroll href=https://nserbin.github.io/es/#accomplishments>Cursos</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contacto</h5><ul><li><a href=mailto:contact@nserbin.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>contact@nserbin.com</span></a></li><li><a href=https://github.com/Nserbin target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>Nserbin</span></a></li><li><a href=https://www.linkedin.com/in/nserbin target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Nicolás Serbin</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu_b3360284c55cf72d.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2025 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Funcionando con
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.b4ccbe4248fb24a8c4f2609bf3f81b47f34874688a19fd33adf6ccfae38f18e2.js integrity="sha256-tMy+Qkj7JKjE8mCb8/gbR/NIdGiKGf0zrfbM+uOPGOI=" defer></script></body></html>